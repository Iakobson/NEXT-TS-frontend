# How to Think About Security in Next.js

## Choosing Your Data Handling Model

[React Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components) стирають межу між сервером і клієнтом. 
Обробка даних має першорядне значення для розуміння того, де інформація обробляється та згодом стає доступною.

Перше, що нам потрібно зробити, це вибрати що саме підходить для нашого проекту.
+ **HTTP API** (рекомендовано для існуючих великих проектів/організацій)
+ **Data Access Layer** (рекомендовано для нових проектів)
+ **Component Level Data Access** (рекомендовано для прототипування та навчання)

Ми рекомендуємо вам дотримуватися одного підходу та не змішувати занадто багато. 

### HTTP APIs

Якщо у вас вже є великий проект або організація, то рекомендовано використовувати **HTTP APIs** для обробки даних. Це означає, що **Server Components** слід розглядати як небезпечні або ненадійні за замовчуванням, так само, як інші техніки обробки даних.

#### Обробка Server Components:

Server Components розглядаються як небезпечні за замовчуванням, і для них не передбачається внутрішня мережа чи зони довіри.\
Інженери можуть застосовувати концепцію **"Zero Trust"** - не довіряти нічому, навіть якщо код виконується в середовищі, якому можна довіряти.

#### Робота з API:

Замість використання внутрішніх з'єднань або зон довіри, **Server Components** взаємодіють із зовнішніми **API**-точками, такими як **REST** або **GraphQL**, використовуючи `fetch()`. Це дозволяє передавати куки для автентифікації.

#### Оновлення існуючого коду:

Якщо у вас вже є функції, які підключаються до бази даних (наприклад, `getStaticProps` чи `getServerSideProps`), рекомендовано перенести їх до **API**-точок, щоб у вас був єдиний спосіб обробки даних.

#### Безпека:

Важливо слідкувати за контролем доступу, оскільки **Server Components** тепер розглядаються як небезпечні. Не передбачається, що запити з внутрішньої мережі є безпечними.

#### Організаційні переваги:

Такий підхід дозволяє зберігати існуючі організаційні структури. Наприклад, команди **backend**, які спеціалізуються на безпеці, можуть продовжити використовувати свої практики безпеки.

#### Переваги Server Components:

При цьому ви все ще можите скористатися перевагами Server Components, які полягають в надсиланні менше коду на клієнт і можливості виконання даних з низькою затримкою.

### Data Access Layer









### Component Level Data Access




